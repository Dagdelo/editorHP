%%HP: T(3)A(R)F(.);
\<< 
@ Salva o livro na biblioteca e retorna 0

@ Entra na pasta de cache
PATH HOME
IF 'Biblioteca' VTYPE -1 == THEN
	Biblioteca CRDIR
END
Biblioteca

@ Cria o arquivo de livros
IF 'Nomes' VTYPE -1 == 'Estante' VTYPE -1 == OR THEN
	{} 'Nomes' STO
	{} 'Estante' STO
END

@ Vê se o livro já não está salvo
Nomes \<-nome POS
IF DUP THEN
	DUP 'Nomes' SWAP \<-nome PUT 'Nomes' STO
	'Estante' SWAP \<-versao \<-nome \<-opcoes \<-indice \<-paginas \<-anexos \<-strings 7. \->LIST PUT 'Estante' STO
ELSE
	DROP
	\<-nome 'Nomes' +
	\<-versao \<-nome \<-opcoes \<-indice \<-paginas \<-anexos \<-strings 7. \->LIST
	1. \->LIST 'Estante' +
END

0
\>>