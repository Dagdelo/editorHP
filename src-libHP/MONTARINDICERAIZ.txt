%%HP: T(3)A(R)F(.);
\<<
@ Monta o índice raiz
@ Recebe a opção que deve ser marcada por padrão (1. é o caso geral)

\<-indice 1. \<<
	1. GET NSUB 2. \->LIST
\>>
DOSUBS

IF \<-anexos SIZE THEN
	{{"\>> Anexos" 0.}} +
END

{{"\>> Buscar" -1.}} +

{{"\>> Enviar livro" -2.}} +

\<-nome SWAP ROT

IF CLLCD CHOOSE THEN
	IF DUP -1. == THEN
		@ Faz uma busca
		DROP
		"Digite o termo\010a ser buscado" ""
		IFERR INPUT THEN
			DROP DROP
		ELSE
			BUSCAR
		END
		1. MONTARINDICERAIZ
	ELSE IF DUP -2. == THEN
		@ Envia para a outra calculadora
		DROP
		ENVIAR
		1. MONTARINDICERAIZ
	ELSE
		IF DUP THEN
			'\<-posIndice' STO+ 2. MONTARINDICE
		ELSE
			DROP MONTARANEXOS
		END
	END END
END
\>>